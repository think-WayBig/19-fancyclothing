!function(t){"use strict";var e,i,n,o=t.document.documentElement;function s(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}function r(t,o){(e(t,o)?n:i)(t,o)}"classList"in document.documentElement?(e=function(t,e){return t.classList.contains(e)},i=function(t,e){t.classList.add(e)},n=function(t,e){t.classList.remove(e)}):(e=function(t,e){return s(e).test(t.className)},i=function(t,i){e(t,i)||(t.className=t.className+" "+i)},n=function(t,e){t.className=t.className.replace(s(e)," ")});var a={hasClass:e,addClass:i,removeClass:n,toggleClass:r,has:e,add:i,remove:n,toggle:r};function l(){var e=o.clientHeight,i=t.innerHeight;return e<i?i:e}function c(){return t.pageYOffset||o.scrollTop}function u(t,e){var i=t.offsetHeight,n=c(),o=n+l(),s=function(t){var e=0,i=0;do{isNaN(t.offsetTop)||(e+=t.offsetTop),isNaN(t.offsetLeft)||(i+=t.offsetLeft)}while(t=t.offsetParent);return{top:e,left:i}}(t).top;return s+i*(e=e||0)<=o&&s+i-i*e>=n}function f(t,e,i){this.el=t,this.options=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(this.defaults,e),this.masonryOptions=i,this._init()}"function"==typeof define&&define.amd?define(a):t.classie=a,f.prototype={defaults:{minDuration:0,maxDuration:0,viewportFactor:0,animateVisible:!1},_init:function(){this.items=Array.prototype.slice.call(jQuery(this.el).find(".masonry-item")),this.itemsCount=this.items.length,this.itemsRenderedCount=0,this.didScroll=!1;var e=this;imagesLoaded(this.el,(function(){e.masonryOptions&&new Masonry(e.el,e.masonryOptions),Modernizr.cssanimations&&(e.items.forEach((function(t,i){u(t)&&(e._checkTotalRendered(),e.options.animateVisible?setTimeout((function(){e._scrollPage()}),500):a.add(t,"shown"))})),t.addEventListener("scroll",(function(){e._onScrollFn()}),!1),t.addEventListener("resize",(function(){e._resizeHandler()}),!1))}))},_onScrollFn:function(){var t=this;this.didScroll||(this.didScroll=!0,setTimeout((function(){t._scrollPage()}),60))},_scrollPage:function(){var t=this;this.items.forEach((function(e,i){a.has(e,"shown")||a.has(e,"animate")||!u(e,t.options.viewportFactor)||setTimeout((function(){var i=$(t.el).offset(),n=(parseFloat(c()-i.top)<0?0:c()-i.top)+l()/2;if(t.el.style.WebkitPerspectiveOrigin="50% "+n+"px",t.el.style.MozPerspectiveOrigin="50% "+n+"px",t.el.style.perspectiveOrigin="50% "+n+"px",t._checkTotalRendered(),t.options.minDuration&&t.options.maxDuration){var o=Math.random()*(t.options.maxDuration-t.options.minDuration)+t.options.minDuration+"s";e.style.WebkitAnimationDuration=o,e.style.MozAnimationDuration=o,e.style.animationDuration=o}a.add(e,"animate")}),25)})),this.didScroll=!1},_resizeHandler:function(){var t=this;this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout((function(){t._scrollPage(),t.resizeTimeout=null}),1e3)},_checkTotalRendered:function(){++this.itemsRenderedCount,this.itemsRenderedCount===this.itemsCount&&t.removeEventListener("scroll",this._onScrollFn)}},t.AnimOnScroll=f}(window);